 {{$varLBR_Assign_Get := .LBR_Assign_Get}}

<style type="text/css">
	.fa-question{
		margin-top: 10px;
}
</style>

<div class="tab-content">
	<div id="tab_0" class="tab-pane active">
		<div class="portlet box grey-cascade">
			<div class="portlet-title">
				<div class="caption">
					<i class="fa fa-gift"></i>Rate Maintenance
				</div>
				<div class="tools">
					<a class="collapse" href="javascript:;">
					</a>
					<a class="config" data-toggle="modal" href="#portlet-config">
					</a>
					<a class="reload" href="javascript:;">
					</a>
					<a class="remove" href="javascript:;">
					</a>
				</div>
			</div>
			<div class="portlet-body form">
				<!-- BEGIN FORM-->
				<form id="DoEditAssignement" class="form-horizontal"  method="Post" onsubmit="return DoEditAssignement()">
					<input type="hidden" name="Id" value="{{.LBR_Assign_Get.Id}}">
					<div class="form-body">
						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
									<label class="col-md-3 control-label">Organization</label>
										<div class="col-md-4">
										<select name="org" class="form-control" data-toggle="tooltip" title="Name Of Organization." > 
										 {{range $orglist := .Org }}
											{{if eq $orglist.Org_id $varLBR_Assign_Get.Org}}
											<option  value="{{$orglist.Org_id}}" selected>{{$orglist.Org_name}}</option>
										 	{{else}}
										 	<option  value="{{$orglist.Org_id}}">{{$orglist.Org_name}}</option>
										 	{{end}}
										 {{end}}
										</select>
									</div>
									
								</div>
								
								
								<div class="form-group">
									<label class="col-md-3 control-label">Name</label>
									<div class="col-md-4">
										
										<input type="text" name="name"  placeholder="Name" value="{{.LBR_Assign_Get.Name}}" maxlength="100" class="form-control createAct" >
									</div>
									<i class="fa fa-question" data-toggle="tooltip" title="Name Of Assignment."></i>
									

								</div>
								<div class="form-group">
									<label class="col-md-3 control-label">Remarks</label>
									<div class="col-md-4">
										
										<input type="text" name="remarks" placeholder="Remarks" value="{{.LBR_Assign_Get.Remarks}}" maxlength="100" class="form-control createAct" >
									</div>
									<i class="fa fa-question" data-toggle="tooltip" title="Optional remarks"></i>

								</div>
								
								<div class="form-group">
									<label class="col-md-3 control-label"><b>Paying Rate</b></label>
								</div>
								
								<div class="form-group">
									<label class="col-md-3 control-label">Monthly Rate</label>
									<div class="col-md-4">
										
										<input type="text" name="pmonthlyrate"  maxlength="100" class="form-control createAct" >
									</div>

								</div>
								
								<div class="form-group">
									<label class="col-md-3 control-label">Daily Rate</label>
									<div class="col-md-4">
										
										<input type="text" name="pdailyrate"  maxlength="100" class="form-control createAct" >
									</div>
									

								</div>
								
								<div class="form-group">
									<label class="col-md-3 control-label">Hourly Rate</label>
									<div class="col-md-4">
										
										<input type="text" name="phourlyrate"  maxlength="100" class="form-control createAct" >
									</div>
									

								</div>
								
								<div class="form-group">
									<label class="col-md-3 control-label"><b>Billing Rate</b></label>
								</div>

								<div class="form-group">
									<label class="col-md-3 control-label">Monthly Rate</label>
									<div class="col-md-4">
										
										<input type="text" name="bmonthlyrate"  maxlength="100" class="form-control createAct" >
									</div>
									

								</div>
								
								<div class="form-group">
									<label class="col-md-3 control-label">Daily Rate</label>
									<div class="col-md-4">
										
										<input type="text" name="bdailyrate"  maxlength="100" class="form-control createAct" >
									</div>
									

								</div>
								
								<div class="form-group">
									<label class="col-md-3 control-label">Hourly Rate</label>
									<div class="col-md-4">
										
										<input type="text" name="bhourlyrate"  maxlength="100" class="form-control createAct" >
									</div>
									

								</div>
								
								<div class="form-group">
									<label class="col-md-3 control-label">Hourly OT Rate</label>
									<div class="col-md-4">
										
										<input type="text" name="bhourlyotrate"  maxlength="100" class="form-control createAct" >
									</div>
									

								</div>
								
								<div class="form-group">
									<label class="col-md-3 control-label">Admin Fee</label>
									<div class="col-md-4">
										
										<input type="text" name="adminfee"  maxlength="100" class="form-control createAct" >
									</div>
									

								</div>
								


							</div>
							
							<div class="col-md-6">
								
								

							</div>	
						</div>
						<hr>

						<table class="table table-bordered ">
							<thead>
								<tr>
									<th colspan = "2">
										Premium Rate
									</th>
									<th colspan = "2">
										 ND Rate
									</th>
									
								</tr>
							</thead>
							<tbody>
								<!-- data run here -->
								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										Regular EW/OT
									</td>
									<td>
													<input type="text" name="regot" maxlength="5" class="form-control createAct" required>
									</td >
									<td>
										Regular
									</td>
									<td>
													<input type="text" name="regnd" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>

								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										Restday
									</td>
									<td>
													<input type="text" name="rd" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										Regular OT
									</td>
									<td>
													<input type="text" name="regndot" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>
								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										Restday EW/OT
									</td>
									<td>
													<input type="text" name="rdot" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										Restday
									</td>
									<td>
													<input type="text" name="rdnd" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>

								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										RegHol 100%
									</td>
									<td>
													<input type="text" name="reghol100" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										Restday OT
									</td>
									<td>
													<input type="text" name="rdndot" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>
								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										RegHol 200%
									</td>
									<td>
													<input type="text" name="reghol200" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										RegHol
									</td>
									<td>
													<input type="text" name="regholnd" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>

								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										RegHol EW/OT
									</td>
									<td>
													<input type="text" name="regholot" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										RegHol EW/OT
									</td>
									<td>
													<input type="text" name="regholndot" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>
								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										RegHol Restday
									</td>
									<td>
													<input type="text" name="regholrd" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										RegHol Restday
									</td>
									<td>
													<input type="text" name="regholndrd" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>

								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										RegHol Restday EW/OT
									</td>
									<td>
													<input type="text" name="regholrdot" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										RegHol Restday EW/OT
									</td>
									<td>
													<input type="text" name="regholrdndot" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>
								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										SplHol
									</td>
									<td>
													<input type="text" name="splhol" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										SplHol
									</td>
									<td>
													<input type="text" name="splholnd" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>

								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										SplHol EW/OT
									</td>
									<td>
													<input type="text" name="splholot" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										SplHol EW/OT
									</td>
									<td>
													<input type="text" name="splholndot" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>
								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										SplHol Restday
									</td>
									<td>
													<input type="text" name="splholrd" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										SplHol Restday
									</td>
									<td>
													<input type="text" name="splholndrd" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>

								<tr class="odd gradeX">
									<!--<td>
										<input type="checkbox" class="checkboxes" value="1"/>
									</td> -->
									<td>
										SplHol Restday EW/OT
									</td>
									<td>
													<input type="text" name="splholot" maxlength="5" class="form-control createAct" required>

									</td >
									<td>
										SplHol Restday EW/OT
									</td>
									<td>
													<input type="text" name="splholrdndot" maxlength="5" class="form-control createAct" required>

									</td>	
										
								</tr>
								
								<!-- end run here -->
								
							</tbody>
						</table>


					</div>

					<div class="form-actions fluid">
						<div class="col-md-offset-3 col-md-9">
							<button class="btn btn-circle blue" type="submit">Submit</button>
							<button class="btn btn-circle default" onclick="javascript:nav_back()" type="button">Cancel</button>
						</div>
					</div>
				</form>
				<!-- END FORM-->
			</div>
		</div>
		
		
		
		
	</div>
	
</div>


<script type="text/javascript">
			$('select[name=org]').focus()	 
		  	$(".form_time").inputmask("mask", {
		        "mask": "99:99:99"
		    });
			$('[data-toggle="tooltip"]').tooltip();   

		 	$('.date-picker').datepicker({
                rtl: Metronic.isRTL(),
                orientation: "left",
                autoclose: true
            });


            	$("[name=parent] , [name=location_transfer]").select2();



            	var m_date = $("[name=mrate]").val();
            	var d_date = $("[name=drate]").val();
            	var h_date = $("[name=hrate]").val();


				if(m_date=="<no value>"){
					$("[name=mrate]").val(0);
				}
				if(m_date==""){
					$("[name=mrate]").val(0);
				}
				if(d_date=="<no value>"){
					$("[name=drate]").val(0);
				}	
				if(d_date==""){
					$("[name=drate]").val(0);
				}				
				if(h_date=="<no value>"){
					$("[name=hrate]").val(0);
				}			
				if(h_date==""){
					$("[name=hrate]").val(0);
				}

		 	function validateTime(s) {
			  	var t = s.split(':');
			  	if(s==""){
			  		return true;
			  	}else{
			  		/*if (t[0] >23 && t[1] >1 ){
			  			return false;
			  		} */
					return /^\d\d:\d\d:\d\d$/.test(s) &&
			        	t[0] >= 0 && t[0] < 24 &&
			         	t[1] >= 0 && t[1] < 60 &&
			         	t[2] >= 0 && t[2] < 60 ;
				}	
			}
			
		 	function mask_validation () {
		 		var ht_err = 'border: 1px solid red;'
		 		var count_err =0
		 		if(!$('input[name=default_in]').inputmask("isComplete")  && stringContains($('input[name=default_in]').val(),"_" )  || (!validateTime($('input[name=default_in]').val()) ) ){
			       	$('input[name=default_in]').attr({style:ht_err})
			    	count_err =count_err +1
				}else{
			    	$('input[name=default_in]').attr({style:''})	
			    }

			    if(!$('input[name=default_out]').inputmask("isComplete") && stringContains($('input[name=default_out]').val(),"_" )  || (!validateTime($('input[name=default_out]').val()) )){
			       $('input[name=default_out]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=default_out]').attr({style:''})	
			    }

			    if(!$('input[name=sun_in]').inputmask("isComplete") && stringContains($('input[name=sun_in]').val(),"_" ) || (!validateTime($('input[name=sun_in]').val()) ) ){
			       $('input[name=sun_in]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=sun_in]').attr({style:''})	
			    }
			    

			    if(!$('input[name=sun_out]').inputmask("isComplete") && stringContains($('input[name=sun_out]').val(),"_" )  || (!validateTime($('input[name=sun_out]').val()) ) ){
			       $('input[name=sun_out]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=sun_out]').attr({style:''})	
			    }

			    if(!$('input[name=mon_in]').inputmask("isComplete") && stringContains($('input[name=mon_in]').val(),"_" )  || (!validateTime($('input[name=mon_in]').val()) ) ){
			       $('input[name=mon_in]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=mon_in]').attr({style:''})	
			    }

			    

			    if(!$('input[name=mon_out]').inputmask("isComplete") && stringContains($('input[name=mon_out]').val(),"_" ) || (!validateTime($('input[name=mon_out]').val()) ) ){
			       $('input[name=mon_out]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=mon_out]').attr({style:''})	
			    }


		 		if(!$('input[name=tue_in]').inputmask("isComplete") && stringContains($('input[name=tue_in]').val(),"_" )  || (!validateTime($('input[name=tue_in]').val()) ) ){
			       $('input[name=tue_in]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=tue_in]').attr({style:''})	
			    }

			    if(!$('input[name=tue_out]').inputmask("isComplete") && stringContains($('input[name=tue_out]').val(),"_" )  || (!validateTime($('input[name=tue_out]').val()) ) ){
			       $('input[name=tue_out]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=tue_out]').attr({style:''})	
			    }

			    if(!$('input[name=wed_in]').inputmask("isComplete") && stringContains($('input[name=wed_in]').val(),"_" )  || (!validateTime($('input[name=wed_in]').val()) ) ){
			       $('input[name=wed_in]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=wed_in]').attr({style:''})	
			    }

			    if(!$('input[name=wed_out]').inputmask("isComplete") && stringContains($('input[name=wed_out]').val(),"_" )  || (!validateTime($('input[name=wed_out]').val()) ) ){
			       $('input[name=wed_out]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=wed_out]').attr({style:''})	
			    }

			    if(!$('input[name=thu_in]').inputmask("isComplete") && stringContains($('input[name=thu_in]').val(),"_" )  || (!validateTime($('input[name=thu_in]').val()) ) ){
			       $('input[name=thu_in]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=thu_in]').attr({style:''})	
			    }

			    if(!$('input[name=thu_out]').inputmask("isComplete") && stringContains($('input[name=thu_out]').val(),"_" )  || (!validateTime($('input[name=thu_out]').val()) ) ){
			       $('input[name=thu_out]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=thu_out]').attr({style:''})	
			    }

				if(!$('input[name=fri_in]').inputmask("isComplete") && stringContains($('input[name=fri_in]').val(),"_" )  || (!validateTime($('input[name=fri_in]').val()) ) ){
			       $('input[name=fri_in]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=fri_in]').attr({style:''})	
			    }

			    if(!$('input[name=fri_out]').inputmask("isComplete") && stringContains($('input[name=fri_out]').val(),"_" )  || (!validateTime($('input[name=fri_out]').val()) ) ){
			       $('input[name=fri_out]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=fri_out]').attr({style:''})	
			    }

			    if(!$('input[name=sat_in]').inputmask("isComplete") && stringContains($('input[name=sat_in]').val(),"_" )  || (!validateTime($('input[name=sat_in]').val()) ) ){
			       $('input[name=sat_in]').attr({style:ht_err})
			    	count_err =count_err +1
			    }else{
			    	$('input[name=sat_in]').attr({style:''})	
			    }

				if(!$('input[name=sat_out]').inputmask("isComplete") && stringContains($('input[name=sat_out]').val(),"_" )  || (!validateTime($('input[name=sat_out]').val()) ) ){
			       $('input[name=sat_out]').attr({style:ht_err})
			       count_err =count_err +1
			    }else{
			    	$('input[name=sat_out]').attr({style:''})
			    }

			    if(count_err > 0) {
			    	return false
			    }else{
			    	return true
			    } 
		 	}

			function DoEditAssignement(){
				if(!mask_validation()){
					alert("please fill-up correctly")
					return false
				}
				$.post("/assignment/EditAssignment",$( "#DoEditAssignement" ).serialize()
		        ,
		        function(data,status){
		            if(data.Status==true){
		            	alert(data.Message)
		            	if(data.Message=='Success'){
			            	$(".createAct").val("")
			            	//Navigate('/assignment?rights={{.Rights}}')
			            	nav_back()
			            }
		            	

		            }
		           
		        });
	 		return false
			}


function repoFormatResult( repo ) {
    var markup = "<div class='select2-result-repository clearfix'> <div class='select2-result-repository__title'>" + repo.full_name + "</div></div>";

    return markup;
}

function repoFormatSelection( repo ) {
    return repo.full_name;
}
$( "#mask_postcode" ).select2({
    placeholder: "Search for Address",
     minimumInputLength: 3,
        multiple: false,
        allowClear: true,
    ajax: {
        url: "/Ajax/GetPostalcode",
        dataType: "json",
        quietMillis: 250,
        data: function( term, page ) {
            return {
                // search term
                q: term
            };
        },
        results: function( data, page ) {
                // parse the results into the format expected by Select2.
                // since we are using custom formatting functions we do not need to alter the remote JSON data
                return { results: data.items };
        }
        
    },
	initSelection: function( element, callback ) {
		// the input tag has a value attribute preloaded that points to a preselected repository's id
		// this function resolves that id attribute to an object that select2 can render
		// using its formatResult renderer - that way the repository name is shown preselected
		var id = $( element ).val();
		if ( id !== "" ) {
			$.ajax( "/Ajax/GetPostalcode?id=" + id, {
				dataType: "json"
			}).done( function( data ) {
				callback( data );
			});
		}
	},

    
    formatResult: repoFormatResult,
    formatSelection: repoFormatSelection,
    // apply css that makes the dropdown taller
    dropdownCssClass: "bigdrop",
    // we do not want to escape markup since we are displaying html in results
    escapeMarkup: function( m ) {
        return m;
    }
});

			</script>