    <!-- BEGIN EXAMPLE TABLE PORTLET-->
    
    <div class="portlet box grey-cascade">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-globe"></i>{{.Tempconf.Panel_name}}
            </div>
            <div class="tools">
                <a href="javascript:;" class="collapse">
                </a>
                <a href="#portlet-config" data-toggle="modal" class="config">
                </a>
                <a href="javascript:;" class="reload">
                </a>
                <a href="javascript:;" class="remove">
                </a>
            </div>
        </div>
        <div class="portlet-body">
            <div class="table-toolbar">
                {{if eq .Tempconf.Add_back_button "true"}}
                    <div class="btn-group">
                        <a Class="btn green ajaxify" href="#/member?rights={{.Tempconf.Rights}}" onclick="javascript:nav_back('/member?rights={{.Tempconf.Rights}}');">
                        <i class="fa fa-backward"></i> Back 
                        </a>
                    </div>
                {{end}}
                {{if eq .Tempconf.Add_new_button_details "true"}}
                    <a  class="btn green act_btn" data-toggle='modal' href='#basic'  onclick="javascript:Modalfunc('{{.Tempconf.Add_new_button_url}}{{.Tempconf.hdr_id}}');">
                    Add New <i class="fa fa-plus"></i>
                     </a>
                     
                {{end}}
                
                {{if eq .Tempconf.Add_new_button "true"}}
                <div class="btn-group act_btn" >
                    <a class="btn green" href="#{{.Tempconf.Add_new_button_url}}" onclick="javascript:Navigate('{{.Tempconf.Add_new_button_url}}');">
                    Add New <i class="fa fa-plus"></i>
                    </a>
                </div>
                {{end}}

                {{if eq .Tempconf.upload_button "true"}}
                
                <form class="btn-group act_btn" id="fileinfo_N1" method="post"  enctype="multipart/form-data" onsubmit="return Uploadlog('N1')">
                    <fieldset>
                        <div style="position:relative;">
                            <a class="btn green" href="javascript:;">
                                Upload IN01<i class="fa fa-plus"></i>
                                <input type="file" name="myfiles"style='position:absolute;z-index:2;top:0;left:0;filter: alpha(opacity=0);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";opacity:0;background-color:transparent;color:transparent; width: 89px; height: 34px;' size="40"  accept=".dat" id="myfiles" onchange="return Uploadlog('N1');" >
                            </a>
                            &nbsp;
                            <span class='label label-info' id="upload-file-info"></span>
                        </div>
                    </fieldset>  
                </form>
               

                <form class="btn-group act_btn" id="fileinfo" method="post"  enctype="multipart/form-data" onsubmit="return Uploadlog('H5')">
                    <fieldset>
                        <!-- <a Class="btn green" href="#{{.Tempconf.Add_new_button_url}}" onclick="javascript:Navigate('{{.Tempconf.Add_new_button_url}}');">
                        Upload<i class="fa fa-plus"></i>
                        </a> -->
                        <div style="position:relative;">
                        <a class="btn green" href="javascript:;">
                            Upload H5<i class="fa fa-plus"></i>
                            <input type="file" name="myfiles" style='position:absolute;z-index:2;top:0;left:0;filter: alpha(opacity=0);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";opacity:0;background-color:transparent;color:transparent; width: 89px; height: 34px;' size="40"  accept=".dat" id="myfiles" onchange="return Uploadlog('H5');" >
                        </a>
                        &nbsp;
                        <span class='label label-info' id="upload-file-info"></span>
                </div>

    

                      <!--   <input Class="btn green" type="file" name="myfiles" id="myfiles" multiple="multiple"> -->
                    </fieldset>  
                </form>



                <form class="btn-group act_btn" id="fileinfo_C7" method="post"  enctype="multipart/form-data" onsubmit="return Uploadlog('C7')">
                    <fieldset>
                        <!-- <a Class="btn green" href="#{{.Tempconf.Add_new_button_url}}" onclick="javascript:Navigate('{{.Tempconf.Add_new_button_url}}');">
                        Upload<i class="fa fa-plus"></i>
                        </a> -->
                        <div style="position:relative;">
                            <a class="btn green" href="javascript:;">
                                Upload C7 <i class="fa fa-plus"></i>
                                <input type="file" name="myfiles"style='position:absolute;z-index:2;top:0;left:0;filter: alpha(opacity=0);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";opacity:0;background-color:transparent;color:transparent; width: 89px; height: 34px;' size="40"  accept=".txt" id="myfiles" onchange="return Uploadlog('C7');" >
                            </a>
                        &nbsp;
                        <span class='label label-info' id="upload-file-info"></span>
                        </div>

                    <!--   <input Class="btn green" type="file" name="myfiles" id="myfiles" multiple="multiple"> -->
                    </fieldset>  
                </form>

                <form class="btn-group act_btn" id="fileinfo_VF300" method="post"  enctype="multipart/form-data" onsubmit="return Uploadlog('VF300')">
                    <fieldset>
                        <!-- <a Class="btn green" href="#{{.Tempconf.Add_new_button_url}}" onclick="javascript:Navigate('{{.Tempconf.Add_new_button_url}}');">
                        Upload<i class="fa fa-plus"></i>
                        </a> -->
                        <div style="position:relative;">
                            <a class="btn green" href="javascript:;">
                                Upload VF300 <i class="fa fa-plus"></i>
                                <input type="file" name="myfiles"style='position:absolute;z-index:2;top:0;left:0;filter: alpha(opacity=0);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";opacity:0;background-color:transparent;color:transparent; width: 89px; height: 34px;' size="40"  accept=".txt" id="myfiles" onchange="return Uploadlog('VF300');" >
                            </a>
                        &nbsp;
                            <span class='label label-info' id="upload-file-info"></span>
                        </div>


    

                      <!--   <input Class="btn green" type="file" name="myfiles" id="myfiles" multiple="multiple"> -->
                    </fieldset>  
                </form>

                {{end}}
                {{if eq .Tempconf.Interpret_button "true"}}
                <div class="btn-group act_btn">
                    <a class="btn green" href="#{{.Tempconf.Interpret_button_url}}" onclick="javascript:func_interpret('{{.Tempconf.Interpret_button_url}}');">
                    Interpret 
                    </a>
                </div>
                {{end}}
                {{if eq .Tempconf.Add_post_button "true"}}
                <div class="btn-group act_btn">
                    <a class="btn green" href="#{{.Tempconf.Add_post_button_url}}" onclick="javascript:func_post('{{.Tempconf.Add_post_button_url}}');">
                    Post 
                    </a>
                </div>
                {{end}}
                


                <div class="btn-group pull-right">
                    <button class="btn dropdown-toggle" data-toggle="dropdown">Tools <i class="fa fa-angle-down"></i>
                    </button>
                    <ul class="dropdown-menu pull-right">
                        <li>
                            <a href="#">
                            Print </a>
                        </li>
                        <li>
                            <a href="#">
                            Save as PDF </a>
                        </li>
                        <li>
                            <a href="#">
                            Export to Excel </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="error_section">
               
            </div>
            


            <div class ="progressclass">

               <!--  <div class="progress"> <div class="progress-bar progress-bar-striped active uploadprog" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 10%"> <span class="sr-only">45% Complete</span></div></div> -->

            </div>
            <div class ="progressCountclass"></div>
            
             
            <!-- <div>pushing...</div> -->
        <table id="example1" class="table table-striped table-bordered table-hover display" cellspacing="0" width="100%">
            <thead>
                     <!-- <tr style="border-bottom: 1px solid #DDD;">
                    <th colspan="2" >HR Information</th>
                    <th colspan="2">Contact</th>
                </tr> -->
                <tr>
                    {{ range $index, $elmt := .Headercol}}
                    <th>{{$elmt}}</th>
                    {{end}}
                </tr>
            </thead>

            <tfoot>
                <!-- <tr>
                    {{ range $index, $elmt := .Headercol}}
                    <th>{{$elmt}}</th>
                    {{end}}
                </tr> -->
                 <!--  <tr >
                    <th colspan="2" >HR Information</th>
                    <th colspan="1" style="border-top: 1px solid #DDD;">Contact</th>
                </tr> -->
                
            </tfoot>
        </table>
        
    </div>
</div>

 <script>
       var stat_done = 0
       var level = "{{.Tempconf.level}}"
       var last_url = "{{.AjaxUrl}}"
       var  last_search ="{{.Tempconf.last_search}}"
       $(document).ready(function() {
            var oTable =    $('#example1').dataTable( {
                                "serverSide": true,
                                "processing": true,
                                "ajax": "{{.AjaxUrl}}",
                                "ordering" : false,
                                destroy: true,
                                "pageLength": {{.Tempconf.pageLength}},
                                'displayStart': {{.Tempconf.displayStart}},
                                "oSearch": {"sSearch": last_search},
                                "sDom": '<"top"iflp>rt<"bottom"i>',
                                "sScrollX": "100%",
                                "sScrollYInner": "110%",
                                "columnDefs": [
                                    {
                                        "targets": [ 1 ],
                                        "visible": false
                                    },
                                    
                                ],     

                                "initComplete": function() {
                                    var $searchInput = $('div.dataTables_filter input');

                                    $searchInput.unbind();

                                    $searchInput.bind('keyup', function(e) {
                                        if(e.keyCode == 13) {
                                            oTable.fnFilter(this.value); 
                                        }
                                    });
                                },

                            } ) ;
            $('#example1').on( 'draw.dt', function () {
               //   console.log(oTable.ajax.params());
               //alert(params)
               //console.log(oTable.dataTable().fnSettings())
               if(level=='1'){
               var params = oTable.oApi._fnAjaxParameters(oTable.dataTable().fnSettings());
               localStorage.setItem("last_url", last_url); 
               localStorage.setItem("last_start", params.start);
               localStorage.setItem("last_length",params.length);
               localStorage.setItem("last_search",params.search.value);
               }

               
            });




        });
        
        
        function func_interpret(a,b){
            var htdata ='<div class="upload_top_info">'
                       htdata +=' <div class="upload_jif" style="background: url(/src/metronic_3.1.2/images/throbber.gif) center center no-repeat; height: 15px; width: 18px; display: inline-block;">'
                                    
                    htdata +='</div>'
                    htdata +='<div class="upload_info" style="display: inline-block;">  Interpreting logs, please wait...</div>'
                    htdata += '</div>' 
                     $(".progressclass").html(htdata)

            
            
            var session_max = $.get("/SessionExpire?process=true",
                {
                },
                function(data,status){
                    if(data.trim().length>0){
                        $("#modalSession").html(data);
                        x=1
                        $('#modalSession').modal({
                          keyboard: false ,
                          backdrop: 'static'
                        });
                        $('#modalSession').modal('show');
                    }
                }
            );

            $.get(a,
                function(data,status){
                   $(".progressclass").html("")
                   if(data.Message.includes("Success")){
                        var htdata =' <div class="Metronic-alerts alert alert-success fade in"><button type="button" '
                        htdata +='class="close" data-dismiss="alert" aria-hidden="true"></button><i class="fa-lg fa fa-'
                        htdata += 'success"></i>  Interpreting'
                        htdata += data. Message
                        htdata += '</div>   '
                        $(".error_section").html(htdata);
                        table = $('#example1').dataTable( {
                            "serverSide": true,
                            "ajax": "{{.AjaxUrl}}",
                            "processing": true,
                            destroy: true,
                            "initComplete": function() {
                                var $searchInput = $('div.dataTables_filter input');

                                $searchInput.unbind();

                                $searchInput.bind('keyup', function(e) {
                                    if(e.keyCode == 13) {
                                        table.fnFilter(this.value); 
                                    }
                                });
                            },
                        } );
                    }else{
                        var htdata =' <div class="Metronic-alerts alert alert-danger fade in"><button type="button" '
                        htdata +='class="close" data-dismiss="alert" aria-hidden="true"></button><i class="fa-lg fa fa-'
                        htdata += 'warning"></i>  opss interpreting something went wrong<br>'
                        htdata += data. Message
                        htdata += '</div>   '
                        $(".error_section").html(htdata);
                    } 
                   
                  
                }
            );
            return false
        }

        function func_post(a,b){
            var htdata ='<div class="upload_top_info">'
                       htdata +=' <div class="upload_jif" style="background: url(/src/metronic_3.1.2/images/throbber.gif) center center no-repeat; height: 15px; width: 18px; display: inline-block;">' 
                                    
                    htdata +='</div>'
                    htdata +='<div class="upload_info" style="display: inline-block;">  Posting logs, please wait...</div>'
                    htdata += '</div>' 
                     $(".progressclass").html(htdata)
            
            var session_max = $.get("/SessionExpire?process=true",
                {
                },
                function(data,status){
                    if(data.trim().length>0){
                        $("#modalSession").html(data);
                        x=1
                        $('#modalSession').modal({
                          keyboard: false ,
                          backdrop: 'static'
                        });
                        $('#modalSession').modal('show');
                    }
                }
            );
                     
            $.get(a,
                    function(data,status){
                        console.log(data.Message)
                        $(".progressclass").html("")
                        if(data.Message.includes("Success")){
                            $(".act_btn").hide();
                            var htdata =' <div class="Metronic-alerts alert alert-success fade in"><button type="button" '
                            htdata +='class="close" data-dismiss="alert" aria-hidden="true"></button><i class="fa-lg fa fa-'
                            htdata += 'success"></i>  Postring '
                            htdata += data. Message
                            htdata += '</div>   '
                            $(".error_section").html(htdata);
                            table = $('#example1').dataTable( {
                                "serverSide": true,
                                "ajax": "{{.AjaxUrl}}",
                                "processing": true,
                                destroy: true,
                            } );
                        }else{
                            var htdata =' <div class="Metronic-alerts alert alert-danger fade in"><button type="button" '
                            htdata +='class="close" data-dismiss="alert" aria-hidden="true"></button><i class="fa-lg fa fa-'
                            htdata += 'warning"></i> ops posting someting went wrong<br> '
                            htdata += data. Message
                            htdata += '</div>   '
                             $(".error_section").html(htdata);
                        }

                    }
                );
            return false
        }

        function func_edit(a,b){
            $.get(a,
                    function(data,status){
                     $("#ContentID").html(data);
                    $(".dr-js").select2();

                    }
                );
            return false
        }
        function Nav2(a,b){
            $.get("{{.Tempconf.Action_baseURL}}",'{{.Tempconf.ActionCol_param}}='+b,
                    function(data,status){
                     $("#ContentID").html(data);
                    $(".dr-js").select2();

                    }
                );
            return false
            }
       
        

        function Uploadlog(a){
            stat_done =0
            pullingFuc()
            var progressbarhtml ='<div class="progress"> <div class="progress-bar progress-bar-striped active uploadprog" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 10%"> <span class="sr-only">45% Complete</span></div></div> '
            $(".progressclass").html(progressbarhtml)    
            if(a=="C7"){
                var fd = new FormData(document.getElementById("fileinfo_C7"));   
            }else if(a=="N1"){
                var fd = new FormData(document.getElementById("fileinfo_N1"));   
            }else if(a=="VF300"){
                var fd = new FormData(document.getElementById("fileinfo_VF300"));   
            }else{

                var fd = new FormData(document.getElementById("fileinfo")); 
            }
            
            //console.log(fd)
            fd.append("label", "WEBUPLOAD");
            $.ajax({
              url: "/do_test_upload?hid="+{{ .Tempconf.hdr_id}}+"&device="+a,
              type: "POST",
              xhr: function() {  // custom xhr
                    var myXhr = $.ajaxSettings.xhr();
                    if(myXhr.upload){ // check if upload property exists
                        myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
                    }
                    return myXhr;
                },
              data: fd ,
              enctype: 'multipart/form-data',
              processData: false,  // tell jQuery not to process the data
              contentType: false   // tell jQuery not to set contentType
              //async: false
            }).done(function( data,status ) {
                stat_done =1
                var ht =''
                var success_count = 0
                var error_count = 0
                for (var i = 0; i < data.length; i++) { 
                    ht+='txt line:'+data[i].Txtline +', MsgID: ' + data[i].MsgID+' Msg: '+data[i].Msg + '<br>'
                    if(stringContains(data[i].Msg,"Error")) {
                       error_count = error_count+1
                    }
                    if(stringContains(data[i].Msg,"Success")){
                       success_count = success_count+1 
                    }
                }
                $(".progressclass").html("")
                    
                var htdata =' <div class="Metronic-alerts alert alert-success fade in"><button type="button" '
                htdata +='class="close" data-dismiss="alert" aria-hidden="true"></button><i class="fa-lg fa fa-'
                htdata += 'warning"></i>  '
                htdata += 'Upload Success.<br>'
                htdata += 'Success count: '+ success_count +'<br>'
                htdata += 'Error count: '+ error_count +'<br>'
                htdata += ht
                htdata += '</div>   '
                $(".error_section").html(htdata); 
                /*$.get("/timekeeping/CreateTransactionDetails?ID="+{{.Tempconf.hdr_id}},
                     function(data,status){
                     $("#ContentID").html(data);
                    }
                );*/
                table = $('#example1').dataTable( {
                "serverSide": true,
                "ajax": "{{.AjaxUrl}}",
                "processing": true,
                destroy: true,
            } );

            });
            //stat_done =1
            return false;
        }
       
        function pullingFuc(e){
            //setTimeout(function(){
                $.ajax({ url: "/AjaxPolling", success: function(data){
                //Update your dashboard gauge
                
                $(".progressCountclass").html(data)
               // salesGauge.setValue(data.value);

                //Setup the next poll recursively
                    if (stat_done ==0) {
                    setTimeout(function(){
                    pullingFuc();
                }, 6000);
                    }else{
                         $(".progressCountclass").html("")
                    }
               
                }, dataType: "json"});
          //  }, 3000);

        }    
        function progressHandlingFunction(e){
            if(e.lengthComputable){
                $('.uploadprog').attr({value:e.loaded,max:e.total});
                var percentprog = (e.loaded / e.total) * 100
                //console.log(percentprog)
                $('.uploadprog').attr({style:"width: "+percentprog+"%"})
                if (percentprog >70) {
                   $(".progressclass").html("")
                   var htdata ='<div class="upload_top_info">'
                       htdata +=' <div class="upload_jif" style="background: url(/src/metronic_3.1.2/images/throbber.gif) center center no-repeat; height: 15px; width: 18px; display: inline-block;">'
                                    
                    htdata +='</div>'
                    htdata +='<div class="upload_info" style="display: inline-block;"> Uploading records...</div>'
                    htdata += '</div>' 
                     $(".progressclass").html(htdata)
                };
                

            }
        }

        

        function Modalfunc(a,v){
            console.log(v)
            $.get(a,
                    {
                      Assign_ID:'{{.Tempconf.Assign_ID}}'
                    }
                    ,

                    function(data,status){
                        $("#basic").html(data);
                        $(".dr-js").select2();
                    });
            //return false;
        }
        var clicked
        function Modalfuncdelete (a,b,c) {
            //a=link //b=dtl_id
            clicked =c
            console.log(a)
            $.get(a,
                    {
                      dtl_id:b 
                    },
                    function(data,status){
                        $("#modalSession").html(data);
                    });
            return false;
        }
        function Dodelete (a) {
            $.post(a,$( ".formDelete" ).serialize()
            ,
            function(data,status){
                if(status="success"){
                    $('#modalSession').modal('hide') 
                    clicked.closest("tr").remove();
                }
            });
        return false;
        }

        function nav_back() {
            var  last_length = localStorage.getItem("last_length")
            var  last_start = localStorage.getItem("last_start")
            var  last_search = localStorage.getItem("last_search")
            var  url_last = localStorage.getItem("last_url")
             $.get(url_last,'last_length='+last_length +'&last_start='+last_start+'&last_search='+last_search,
                    function(data,status){
                    $("#ContentID").html(data);
                    $(".dr-js").select2();

                    }
                );
            return false
           


        }
        
</script>
